Version 4
SHEET 1 3940 1108
WIRE 2928 -528 1248 -528
WIRE 3936 -528 2928 -528
WIRE 3584 -336 3520 -336
WIRE 3728 -336 3664 -336
WIRE 3760 -336 3728 -336
WIRE 3904 -336 3840 -336
WIRE 2896 -320 2352 -320
WIRE 3040 -320 2976 -320
WIRE 3104 -320 3040 -320
WIRE 3264 -320 3184 -320
WIRE 3520 -304 3520 -336
WIRE 1840 -240 1328 -240
WIRE 3536 -224 3472 -224
WIRE 3712 -224 3616 -224
WIRE 1840 -192 1840 -240
WIRE 1840 -192 1696 -192
WIRE -224 -176 -224 -256
WIRE -112 -176 -112 -256
WIRE 3776 -176 3776 -224
WIRE 3712 -160 3712 -224
WIRE 3712 -160 3680 -160
WIRE 3728 -160 3728 -336
WIRE 3744 -160 3728 -160
WIRE 3536 -144 3456 -144
WIRE 3680 -144 3680 -160
WIRE 3680 -144 3616 -144
WIRE 3904 -144 3904 -336
WIRE 3904 -144 3808 -144
WIRE 3936 -144 3936 -528
WIRE 3936 -144 3904 -144
WIRE 2560 -128 2560 -176
WIRE 3104 -128 3104 -176
WIRE 3712 -128 3712 -160
WIRE 3744 -128 3712 -128
WIRE 976 -112 672 -112
WIRE 3040 -112 3040 -320
WIRE 3072 -112 3040 -112
WIRE 3264 -96 3264 -320
WIRE 3264 -96 3136 -96
WIRE 3360 -96 3264 -96
WIRE 3456 -96 3456 -144
WIRE 3456 -96 3360 -96
WIRE 1440 -80 1440 -128
WIRE 2768 -80 2688 -80
WIRE 2960 -80 2848 -80
WIRE 3072 -80 2960 -80
WIRE 592 -64 592 -112
WIRE 640 -64 592 -64
WIRE 848 -64 640 -64
WIRE 1328 -64 1328 -240
WIRE 1408 -64 1328 -64
WIRE 1760 -64 1760 -112
WIRE 2352 -64 2352 -320
WIRE 2448 -64 2352 -64
WIRE 3776 -64 3776 -112
WIRE -224 -48 -224 -96
WIRE -112 -48 -112 -96
WIRE 976 -48 976 -112
WIRE 976 -48 912 -48
WIRE 992 -48 976 -48
WIRE 1056 -48 992 -48
WIRE 1584 -48 1472 -48
WIRE 1696 -48 1696 -192
WIRE 1728 -48 1696 -48
WIRE 2688 -48 2688 -80
WIRE 848 -32 768 -32
WIRE 1408 -32 1312 -32
WIRE 1840 -32 1840 -192
WIRE 1840 -32 1792 -32
WIRE 640 -16 640 -64
WIRE 1728 -16 1664 -16
WIRE 3104 -16 3104 -64
WIRE 1248 0 1248 -528
WIRE 1312 0 1312 -32
WIRE 1312 0 1248 0
WIRE 2960 0 2960 -80
WIRE 640 16 640 -16
WIRE 1440 32 1440 -16
WIRE 1760 48 1760 0
WIRE 880 64 880 -16
WIRE 2688 112 2688 32
WIRE 2960 112 2960 80
WIRE 2960 112 2688 112
WIRE 640 128 640 80
WIRE 688 128 640 128
WIRE 768 160 768 -32
WIRE 880 160 768 160
WIRE 1584 160 1584 -48
WIRE 2448 160 2448 -64
WIRE 2672 160 2448 160
WIRE 640 176 640 128
WIRE 2960 176 2960 112
WIRE 2320 240 2256 240
WIRE 2464 240 2400 240
WIRE 2496 240 2464 240
WIRE 2640 240 2576 240
WIRE 688 272 688 128
WIRE 784 272 688 272
WIRE 880 272 880 160
WIRE 880 272 864 272
WIRE 912 272 880 272
WIRE 992 272 992 -48
WIRE 2256 272 2256 240
WIRE 1584 288 1584 224
WIRE 1680 288 1584 288
WIRE 1824 288 1760 288
WIRE 1824 320 1824 288
WIRE 2272 352 2208 352
WIRE 2448 352 2352 352
WIRE 2512 400 2512 352
WIRE 2448 416 2448 352
WIRE 2448 416 2416 416
WIRE 2464 416 2464 240
WIRE 2480 416 2464 416
WIRE 2240 432 2128 432
WIRE 2272 432 2240 432
WIRE 2416 432 2416 416
WIRE 2416 432 2352 432
WIRE 2640 432 2640 240
WIRE 2640 432 2544 432
WIRE 2672 432 2672 160
WIRE 2672 432 2640 432
WIRE 2448 448 2448 416
WIRE 2480 448 2448 448
WIRE 2512 512 2512 464
WIRE 2240 560 2240 432
WIRE 2128 704 2128 432
WIRE 2224 704 2128 704
WIRE 2368 704 2224 704
WIRE 2496 704 2368 704
WIRE 2608 704 2560 704
WIRE 2608 736 2608 704
WIRE 2288 832 2288 784
WIRE 2224 848 2224 704
WIRE 2256 848 2224 848
WIRE 2608 848 2608 800
WIRE 2368 864 2368 704
WIRE 2368 864 2320 864
WIRE 2256 880 2096 880
WIRE 1952 928 1712 928
WIRE 2096 928 2096 880
WIRE 2096 928 2032 928
WIRE 2288 944 2288 896
WIRE 1712 960 1712 928
WIRE 2096 960 2096 928
WIRE 1712 1088 1712 1040
WIRE 2096 1088 2096 1040
FLAG -224 -48 0
FLAG -112 -48 0
FLAG -224 -256 +vcc
FLAG -112 -256 -vcc
FLAG 880 -80 +vcc
FLAG 880 64 -vcc
FLAG 640 176 0
FLAG 640 -16 in
FLAG 1056 -48 out
IOPIN 1056 -48 Out
FLAG 1440 32 -vcc
FLAG 1440 -128 +vcc
FLAG 2560 -128 0
FLAG 1760 48 -vcc
FLAG 1760 -112 +vcc
FLAG 1664 -16 in
FLAG 3104 -16 -vcc
FLAG 3104 -176 +vcc
FLAG 2960 176 0
FLAG 2688 -80 V_ref
FLAG 3776 -64 -vcc
FLAG 3776 -224 +vcc
FLAG 3472 -224 V_ref
FLAG 1824 320 0
FLAG 3520 -304 0
FLAG 3360 -96 v_error
FLAG 2928 -528 v_pwm_out
FLAG 1584 288 pwm_out
FLAG 2288 944 -vcc
FLAG 2288 784 +vcc
FLAG 2096 1088 0
FLAG 2608 848 0
FLAG 1712 1088 0
FLAG 3504 -16 0
FLAG 2512 512 -vcc
FLAG 2512 352 +vcc
FLAG 2256 272 0
FLAG 2240 560 0
FLAG 2208 352 -vcc
SYMBOL voltage -224 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -112 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -12
SYMBOL Opamps\\opamp2 880 -112 R0
SYMATTR InstName U1
SYMATTR Value LM741
SYMBOL cap 624 16 R0
SYMATTR InstName C2
SYMATTR Value 10nF
SYMBOL res 576 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 768 288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 20k
SYMBOL res 1008 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 2.2k
SYMBOL voltage 2560 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2
SYMBOL Opamps\\opamp2 1760 -96 R0
SYMATTR InstName U3
SYMATTR Value LM741
SYMBOL Opamps\\opamp2 1440 -112 R0
SYMATTR InstName U2
SYMATTR Value LM741
SYMBOL Opamps\\opamp2 3104 -160 R0
SYMATTR InstName U4
SYMATTR Value LM741
SYMBOL res 3200 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 2992 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 2864 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 2976 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL voltage 2688 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value -6
SYMBOL Opamps\\opamp2 3776 -208 R0
SYMATTR InstName U5
SYMATTR Value LM741
SYMBOL res 3632 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 3632 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 3856 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL diode 1568 160 R0
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL res 1776 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 3680 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL Opamps\\opamp2 2288 800 R0
SYMATTR InstName U6
SYMATTR Value LM741
SYMBOL res 2080 944 R0
SYMATTR InstName R13
SYMATTR Value 3.3k
SYMBOL res 2048 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 82k
SYMBOL diode 2496 720 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL voltage 1712 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR InstName V4
SYMATTR Value 48
SYMBOL cap 2592 736 R0
SYMATTR InstName C1
SYMATTR Value 10µF
SYMBOL Opamps\\opamp2 2512 368 R0
SYMATTR InstName U7
SYMATTR Value LM741
SYMBOL res 2368 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 2368 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 2592 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res 2416 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
TEXT 136 -104 Left 2 !.lib LM741.sub
TEXT 128 -56 Left 2 !.lib lm358.sub
TEXT 128 8 Left 2 !.tran 0 1.01 1s
TEXT 2792 240 Left 2 ;Diiference Opamp
TEXT 3696 120 Left 2 ;Summation Opamp
TEXT 2400 -216 Left 2 ;V_feedback
TEXT 736 -192 Left 2 ;Oscillator
TEXT 1512 -304 Left 2 ;Pwm generator
TEXT -56 -472 Left 2 ;Alper Soysal 2305324 Pwm generator with analog feedback
TEXT 2544 512 Left 2 ;Adding -12V offset
TEXT 3408 88 Left 2 ;Switch
